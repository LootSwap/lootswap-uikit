import React from "react";
import noop from "lodash/noop";
import { BrowserRouter } from "react-router-dom";
import { renderWithTheme } from "../../testHelpers";
import { Menu, menuConfig, LangType } from "../../widgets/Menu";

/**
 * @see https://jestjs.io/docs/en/manual-mocks
 */
Object.defineProperty(window, "matchMedia", {
  writable: true,
  value: jest.fn().mockImplementation((query) => ({
    matches: false,
    media: query,
    onchange: null,
    addListener: jest.fn(), // deprecated
    removeListener: jest.fn(), // deprecated
    addEventListener: jest.fn(),
    removeEventListener: jest.fn(),
    dispatchEvent: jest.fn(),
  })),
});

const langs: LangType[] = [...Array(20)].map((_, i) => ({ code: `en${i}`, language: `English${i}` }));

it("renders correctly", () => {
  const { asFragment } = renderWithTheme(
    <BrowserRouter>
      <Menu
        account="0xbdda50183d817c3289f895a4472eb475967dc980"
        login={noop}
        logout={noop}
        isDark={false}
        toggleTheme={noop}
        langs={langs}
        setLang={noop}
        currentLang="EN"
        tokenPriceUsd={0.23158668932877668}
        links={menuConfig}
      >
        body
      </Menu>
    </BrowserRouter>
  );

  expect(asFragment()).toMatchInlineSnapshot(`
    <DocumentFragment>
      <div
        class="sc-kLgntA hmuPEi"
      >
        <nav
          class="sc-iktFzd iZjnD"
        >
          <div
            class="sc-gsTCUz sc-dlfnbm jLyPtw byPlie"
          >
            <button
              aria-label="Toggle menu"
              class="sc-eCssSg cJvBtr sc-jSgupP hCCShP"
              scale="md"
            >
              <svg
                class="sc-hKgILt konsK"
                color="textSubtle"
                viewBox="0 0 24 24"
                width="24px"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M4 18H20C20.55 18 21 17.55 21 17C21 16.45 20.55 16 20 16H4C3.45 16 3 16.45 3 17C3 17.55 3.45 18 4 18ZM4 13H20C20.55 13 21 12.55 21 12C21 11.45 20.55 11 20 11H4C3.45 11 3 11.45 3 12C3 12.55 3.45 13 4 13ZM3 7C3 7.55 3.45 8 4 8H20C20.55 8 21 7.55 21 7C21 6.45 20.55 6 20 6H4C3.45 6 3 6.45 3 7Z"
                />
              </svg>
            </button>
            <a
              aria-label="Lootswap home page"
              class="sc-gKsewC jnkuUV"
              href="/"
            >
              <img
                class="logo-img"
                src="https://lootswap.finance/static/media/loot_logo.5ca5dce3.png"
              />
            </a>
          </div>
          <div
            class="sc-gsTCUz sc-dlfnbm jLyPtw byPlie"
          >
            <div>
              <button
                class="sc-eCssSg dUOYud"
                scale="sm"
              >
                0xbd...c980
              </button>
            </div>
          </div>
        </nav>
        <div
          class="sc-jJEJSO hYddnZ"
        >
          <div
            class="sc-dmlrTW kEhQWU"
          >
            <div
              class="sc-kEjbxe fnkFQx"
            >
              <div
                class="sc-fubCfw fYkQzm rainbow"
                role="button"
              >
                <a
                  aria-current="page"
                  class="active"
                  href="/"
                >
                  <svg
                    class="sc-hKgILt glpoOj"
                    color="text"
                    viewBox="0 0 24 24"
                    width="24px"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M9.99998 19V14H14V19C14 19.55 14.45 20 15 20H18C18.55 20 19 19.55 19 19V12H20.7C21.16 12 21.38 11.43 21.03 11.13L12.67 3.59997C12.29 3.25997 11.71 3.25997 11.33 3.59997L2.96998 11.13C2.62998 11.43 2.83998 12 3.29998 12H4.99998V19C4.99998 19.55 5.44998 20 5.99998 20H8.99998C9.54998 20 9.99998 19.55 9.99998 19Z"
                    />
                  </svg>
                  <div
                    class="sc-iBPRYJ fNYuxK"
                  >
                    Home
                  </div>
                </a>
              </div>
              <div
                class="sc-pFZIQ kJqcph"
              >
                <div
                  class="sc-fubCfw eWTPd"
                  role="button"
                >
                  <svg
                    class="sc-hKgILt glpoOj"
                    color="text"
                    viewBox="0 0 24 25"
                    width="24px"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <g>
                      <path
                        d="M18.66,12.21c.07,0,4.94,5.36,5,5.46l-5,5.47a.45.45,0,0,1,0-.16V20.24s0-.07-.05-.07H2c-.14,0-.14,0-.14-.2V15.29c0-.13,0-.13.09-.13h5.6c.08,0,.13,0,.18.13a6.55,6.55,0,0,0,.86,1.41,6,6,0,0,0,.54.58,4.2,4.2,0,0,0,1.17.83,3.91,3.91,0,0,0,1.17.38,3.31,3.31,0,0,0,.62.05,4.52,4.52,0,0,0,1-.17,4.47,4.47,0,0,0,1.24-.61,5.29,5.29,0,0,0,.91-.81,6.42,6.42,0,0,0,.53-.7,6.09,6.09,0,0,0,.55-1c0-.09.08-.12.16-.12h2.12c.05,0,.07,0,.07-.08a.27.27,0,0,1,0-.09V12.21Z"
                      />
                      <path
                        d="M5.31,11.55.3,6.08,5.32.6a.4.4,0,0,1,0,.15c0,.88,0,1.76,0,2.64a.28.28,0,0,1,0,.09c0,.07,0,.09.07.09H22c.16,0,.14,0,.14.19V8.43c0,.18,0,.16-.11.16H16.82c-.07,0-.11,0-.14-.13A6.85,6.85,0,0,0,16.05,7c-.13-.23-.26-.44-.4-.64a5.74,5.74,0,0,0-1.06-1.13,4.37,4.37,0,0,0-1.8-.9,3.19,3.19,0,0,0-.62-.08A3.76,3.76,0,0,0,10,4.8a4.84,4.84,0,0,0-1,.8,5.91,5.91,0,0,0-.86,1.09,6.85,6.85,0,0,0-.39.71c-.09.18-.17.37-.25.56a4.75,4.75,0,0,0-.17.49c0,.1-.06.14-.15.14H5.44c-.12,0-.1,0-.1.15,0,.88,0,1.76,0,2.65v.14Z"
                      />
                      <path
                        d="M8.13,11.37V8.59c0-.19,0-.38,0-.56A2.74,2.74,0,0,1,8.41,7,1.76,1.76,0,0,1,9.3,6a1.28,1.28,0,0,1,1.25.16,2.12,2.12,0,0,1,.82,1.27,1.93,1.93,0,0,1,.06.42,4,4,0,0,1,0,.49c0,.6,0,1.2,0,1.8,0,.13,0,.27,0,.41s.08.3.2.31h.54c.24,0,.36-.14.37-.51,0-.74,0-1.48,0-2.22a2.67,2.67,0,0,1,.23-1.1,2.13,2.13,0,0,1,.6-.82A1.39,1.39,0,0,1,13.94,6a1.13,1.13,0,0,1,.68,0,1.78,1.78,0,0,1,.91.82,2.64,2.64,0,0,1,.33,1,3.57,3.57,0,0,1,0,.46s0,0,0,0c0,2,0,4.07,0,6.1a3,3,0,0,1-.27,1.28,1.78,1.78,0,0,1-1.1,1,1.2,1.2,0,0,1-.87-.1,1.92,1.92,0,0,1-.73-.76,2.53,2.53,0,0,1-.33-.92,4.36,4.36,0,0,1,0-.51c0-.77,0-1.53,0-2.29V12c0-.16-.06-.25-.17-.26h-.12a3.62,3.62,0,0,1-.57,0c-.21,0-.27.08-.27.38v1.94c0,.19,0,.38,0,.56a2.93,2.93,0,0,1-.21.94,2.11,2.11,0,0,1-.71.92,1.18,1.18,0,0,1-1.08.19,1.67,1.67,0,0,1-.81-.63,2.63,2.63,0,0,1-.5-1.53Zm.64-1.43v1.84c0,.13.06.17.15.13l.05,0,.31-.23a3.4,3.4,0,0,1,.73-.38,4.21,4.21,0,0,1,.55-.16c.16,0,.27-.21.27-.45V8.55a.37.37,0,0,0,0-.11.23.23,0,0,1,0-.16,1.93,1.93,0,0,0-.15-.8,1,1,0,0,0-.74-.66A.72.72,0,0,0,9.32,7a1.59,1.59,0,0,0-.55,1.26C8.76,8.8,8.77,9.37,8.77,9.94Zm6.5,2.74V10.92c0-.07,0-.15-.06-.18s-.09,0-.14,0l0,0a2,2,0,0,1-.4.32,3.47,3.47,0,0,1-1.19.48l-.12.05a.22.22,0,0,0-.12.2V12c0,.7,0,1.4,0,2.1v.41a1.77,1.77,0,0,0,0,.33,1.26,1.26,0,0,0,.47.86,1,1,0,0,0,.34.16.73.73,0,0,0,.65-.13,1.57,1.57,0,0,0,.55-1.28C15.28,13.84,15.27,13.26,15.27,12.68Zm-2-2.38v.17c0,.17,0,.23.16.23a.65.65,0,0,0,.27,0,3.93,3.93,0,0,0,.43-.18,3.31,3.31,0,0,0,.61-.39,1.71,1.71,0,0,0,.58-1.32.2.2,0,0,1,0-.07,3.09,3.09,0,0,0-.06-.86,1.27,1.27,0,0,0-.65-1,.68.68,0,0,0-.34-.08.92.92,0,0,0-.57.27,1.41,1.41,0,0,0-.33.53,2.89,2.89,0,0,0-.1,1.1c0,.12,0,.25,0,.37a3.86,3.86,0,0,0,0,.76,1.09,1.09,0,0,1,0,.18A2.81,2.81,0,0,0,13.22,10.3Zm-2.39,2v-.17a.21.21,0,0,0-.09-.19.17.17,0,0,0-.14,0l-.36.13a2.75,2.75,0,0,0-1,.6,1.39,1.39,0,0,0-.28.38,2.53,2.53,0,0,0-.21,1.07c0,.07,0,.14,0,.21a2,2,0,0,0,.09.6,1.32,1.32,0,0,0,.25.52.84.84,0,0,0,1.26.12,1.65,1.65,0,0,0,.43-1.14.75.75,0,0,1,0-.15.67.67,0,0,0,0-.28,2.27,2.27,0,0,0,0-.45.34.34,0,0,1,0-.2.85.85,0,0,0,0-.32.93.93,0,0,0,0-.33.24.24,0,0,1,0-.12A1,1,0,0,0,10.83,12.33Z"
                      />
                    </g>
                  </svg>
                  <div
                    class="sc-iBPRYJ fNYuxK"
                  >
                    Trade
                  </div>
                  <svg
                    class="sc-hKgILt jiVrUJ"
                    color="text"
                    viewBox="0 0 24 24"
                    width="20px"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M8.71005 11.71L11.3001 14.3C11.6901 14.69 12.3201 14.69 12.7101 14.3L15.3001 11.71C15.9301 11.08 15.4801 10 14.5901 10H9.41005C8.52005 10 8.08005 11.08 8.71005 11.71Z"
                    />
                  </svg>
                </div>
                <div
                  class="sc-jrAGrp dfDREn"
                />
              </div>
              <div
                class="sc-fubCfw eWTPd"
                role="button"
              >
                <a
                  href="/questlog"
                >
                  <svg
                    class="sc-hKgILt glpoOj"
                    color="text"
                    viewBox="0 0 24 24"
                    width="24px"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M12 7C12.55 7 13 7.45 13 8V12C13 12.55 12.55 13 12 13C11.45 13 11 12.55 11 12V8C11 7.45 11.45 7 12 7ZM11.99 2C6.47 2 2 6.48 2 12C2 17.52 6.47 22 11.99 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 11.99 2ZM12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20 7.58 20 12C20 16.42 16.42 20 12 20ZM13 17H11V15H13V17Z"
                    />
                  </svg>
                  <div
                    class="sc-iBPRYJ fNYuxK"
                  >
                    Quest Log
                  </div>
                </a>
              </div>
              <div
                class="sc-fubCfw eWTPd"
                role="button"
              >
                <a
                  aria-current="page"
                  class="active"
                  href="/"
                >
                  <svg
                    class="sc-hKgILt glpoOj"
                    color="text"
                    viewBox="0 0 24 25"
                    width="24px"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M3.28,10.39V4.15a.52.52,0,0,1,.18-.44L6.26.9A.64.64,0,0,1,6.71.72h10.6a.63.63,0,0,1,.45.18c.93.94,1.87,1.88,2.81,2.81a.62.62,0,0,1,.18.44V16.63a.57.57,0,0,1-.24.48l-1.3,1-2.07,1.54L15.6,20.76l-2.11,1.56-1.14.85a.56.56,0,0,1-.68,0L9.82,21.79,8.28,20.65,6.17,19.08,4.65,18l-1.14-.84a.54.54,0,0,1-.23-.47Zm10.1,1.08s0,0,0,0l.29-.21.6-.43c.06-.05.06-.05.11,0l0,0,.59.82a.13.13,0,0,0,.09.07l1.22.23a.15.15,0,0,0,.14,0l1.27-.9c.15-.11.15-.11.18-.3s.06-.48.1-.72,0-.25,0-.38a.15.15,0,0,0,0-.11c-.2-.27-.39-.55-.59-.83L16.19,6.93c-.13-.18-.26-.35-.38-.53s-.05-.06-.09-.07L14.49,6.1a.17.17,0,0,0-.12,0c-.43.32-.87.63-1.31.93a.3.3,0,0,0-.14.24.09.09,0,0,1,0,0c-.05.36-.1.73-.16,1.09a.24.24,0,0,0,0,.12l.62.87c0,.05,0,.05,0,.1l-1,.73-.29.2c-.05,0-.06,0-.11,0l-.12-.08-1.21-.87c-.05,0-.05,0,0-.09l.6-.83a.27.27,0,0,0,0-.21c-.06-.39-.12-.78-.17-1.18A.11.11,0,0,0,11,7.11l-1.39-1a.12.12,0,0,0-.1,0l-.2,0-1,.2a.16.16,0,0,0-.11.07l-.47.65L6.61,8.65,6,9.53a.11.11,0,0,0,0,.11c0,.17,0,.33.07.5s.07.49.11.73c0,.05,0,.07.06.1l.53.38.85.6a.13.13,0,0,0,.11,0l1.21-.23A.18.18,0,0,0,9,11.67l.52-.73a1.24,1.24,0,0,1,.14-.18l0,0,.87.61c.08.06.08.06,0,.11l0,0-1.34,1s-.08.09-.13.08S9,12.5,9,12.46s-.05-.08-.14,0l-.7.37-1,.55a.93.93,0,0,0-.19.11l0,.06,1.17,1.63c.09.13.17.26.26.38s.05.05.1,0l0,0,.35-.32.46-.43.48-.44.24-.22c.06-.06.06,0,0-.12L10,13.87s0,0,.06-.06l1.88-1.34c.07-.05.06-.06.14,0l1.77,1.26.18.13L14,14c-.06.09-.06.09,0,.17l.47.42.46.44.59.53c0,.05.06.05.1,0l.44-.61,1-1.41s0-.05,0-.08L16.25,13l-1.1-.59c-.06,0-.07,0-.12,0a.57.57,0,0,1-.1.13Z"
                    />
                  </svg>
                  <div
                    class="sc-iBPRYJ fNYuxK"
                  >
                    Guilds
                  </div>
                </a>
              </div>
              <div
                class="sc-fubCfw eWTPd"
                role="button"
              >
                <a
                  href="https://analytics.lootswap.finance/"
                >
                  <svg
                    class="sc-hKgILt glpoOj"
                    color="text"
                    viewBox="0 0 24 24"
                    width="24px"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M5 7C5 6.44772 4.55228 6 4 6C3.44772 6 3 6.44772 3 7V18C3 19.1046 3.89543 20 5 20H20C20.5523 20 21 19.5523 21 19C21 18.4477 20.5523 18 20 18H5V7Z"
                    />
                    <path
                      clip-rule="evenodd"
                      d="M19 17H7C6.44772 17 6 16.5523 6 16V12C6 11.4477 6.44772 11 7 11H10V10C10 9.44772 10.4477 9 11 9H14V7C14 6.44772 14.4477 6 15 6H19C19.5523 6 20 6.44772 20 7V16C20 16.5523 19.5523 17 19 17ZM16 8H18V15H16V8ZM12 15H14V11H12V15ZM10 13H8V15H10V13Z"
                      fill-rule="evenodd"
                    />
                  </svg>
                  <div
                    class="sc-iBPRYJ fNYuxK"
                  >
                    Analytics
                  </div>
                </a>
              </div>
              <div
                class="sc-pFZIQ kJqcph"
              >
                <div
                  class="sc-fubCfw eWTPd"
                  role="button"
                >
                  <svg
                    class="sc-hKgILt glpoOj"
                    color="text"
                    viewBox="0 0 24 24"
                    width="24px"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M6 10C4.9 10 4 10.9 4 12C4 13.1 4.9 14 6 14C7.1 14 8 13.1 8 12C8 10.9 7.1 10 6 10ZM18 10C16.9 10 16 10.9 16 12C16 13.1 16.9 14 18 14C19.1 14 20 13.1 20 12C20 10.9 19.1 10 18 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"
                    />
                  </svg>
                  <div
                    class="sc-iBPRYJ fNYuxK"
                  >
                    More
                  </div>
                  <svg
                    class="sc-hKgILt jiVrUJ"
                    color="text"
                    viewBox="0 0 24 24"
                    width="20px"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M8.71005 11.71L11.3001 14.3C11.6901 14.69 12.3201 14.69 12.7101 14.3L15.3001 11.71C15.9301 11.08 15.4801 10 14.5901 10H9.41005C8.52005 10 8.08005 11.08 8.71005 11.71Z"
                    />
                  </svg>
                </div>
                <div
                  class="sc-jrAGrp dfDREn"
                />
              </div>
            </div>
            <div
              class="sc-idOhPF bbvLsP"
            >
              <button
                class="sc-eCssSg kDGpve sc-iqHYGH iOsNjo"
                scale="md"
              >
                <svg
                  class="sc-hKgILt jiVrUJ"
                  color="text"
                  viewBox="0 0 24 24"
                  width="20px"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M19.43 12.98C19.47 12.66 19.5 12.34 19.5 12C19.5 11.66 19.47 11.34 19.43 11.02L21.54 9.37C21.73 9.22 21.78 8.95 21.66 8.73L19.66 5.27C19.54 5.05 19.27 4.97 19.05 5.05L16.56 6.05C16.04 5.65 15.48 5.32 14.87 5.07L14.49 2.42C14.46 2.18 14.25 2 14 2H9.99996C9.74996 2 9.53996 2.18 9.50996 2.42L9.12996 5.07C8.51996 5.32 7.95996 5.66 7.43996 6.05L4.94996 5.05C4.71996 4.96 4.45996 5.05 4.33996 5.27L2.33996 8.73C2.20996 8.95 2.26996 9.22 2.45996 9.37L4.56996 11.02C4.52996 11.34 4.49996 11.67 4.49996 12C4.49996 12.33 4.52996 12.66 4.56996 12.98L2.45996 14.63C2.26996 14.78 2.21996 15.05 2.33996 15.27L4.33996 18.73C4.45996 18.95 4.72996 19.03 4.94996 18.95L7.43996 17.95C7.95996 18.35 8.51996 18.68 9.12996 18.93L9.50996 21.58C9.53996 21.82 9.74996 22 9.99996 22H14C14.25 22 14.46 21.82 14.49 21.58L14.87 18.93C15.48 18.68 16.04 18.34 16.56 17.95L19.05 18.95C19.28 19.04 19.54 18.95 19.66 18.73L21.66 15.27C21.78 15.05 21.73 14.78 21.54 14.63L19.43 12.98ZM12 15.5C10.07 15.5 8.49996 13.93 8.49996 12C8.49996 10.07 10.07 8.5 12 8.5C13.93 8.5 15.5 10.07 15.5 12C15.5 13.93 13.93 15.5 12 15.5Z"
                  />
                </svg>
              </button>
            </div>
          </div>
          <div
            class="sc-hiSbYr crsCoN"
          >
            body
          </div>
          <div
            class="sc-bdfBwQ sc-gWHgXt celHMD IZmxf"
            role="presentation"
          />
        </div>
      </div>
    </DocumentFragment>
  `);
});
